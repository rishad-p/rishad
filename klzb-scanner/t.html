<!DOCTYPE html>
<html>
<head>
  <title></title>
  <script src="https://cdn.jsdelivr.net/npm/quagga"></script>

</head>
<body>
  <input type="file" id="file-selector" accept="image/*">
  <canvas id="barcode-scanner" style="display:none;"></canvas>
<script type="text/javascript">
// Initialize QuaggaJS with desired settings
Quagga.init({
    inputStream : {
      name : "Live",
      type : "LiveStream",
      target: document.querySelector('#barcode-scanner')    // Or '#yourElement' (optional)
    },
    decoder : {
        readers : ["ean_reader"]    // List of barcode types to scan for
    }
}, function(err) {
    if (err) {
        console.error(err);
        return;
    }
    console.log("Initialization finished. Ready to start");
    Quagga.start();
});

// Register a listener to scan barcodes and handle results
Quagga.onDetected(function(result) {
    var code = result.codeResult.code;
    console.log("Barcode detected and processed : [" + code + "]");
    // Handle the scanned code as per your application's requirement
});

// Function to stop the scanner (optional)
function stopScanner() {
    Quagga.stop();
}

// Function to scan a file (optional, if you want to scan a barcode from an image file)
document.getElementById('file-selector').addEventListener('change', function(e) {
    var file = e.target.files[0];
    if (!file) return;
    var image = new Image();
    image.onload = function() {
        Quagga.decodeSingle({
            src: URL.createObjectURL(file),
            numOfWorkers: 0,  // Needs to be 0 when used within node
            inputStream: {
                size: 800  // restrict input-size to be 800px in width (long-side)
            },
            decoder: {
                readers: ["ean_reader"] // List of barcode types to scan for
            },
        }, function(result) {
            console.log("Decoding complete. Result: ", result);
            // Handle the scanned code as per your application's requirement
        });
    };
    image.src = URL.createObjectURL(file);
});

</script>
</body>
</html>